{"ast":null,"code":"import _objectSpread from\"E:\\\\ReactApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:\\\\ReactApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\ReactApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\ReactApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\ReactApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import Header from\"./Header\";import Order from\"./Order\";import Inventory from\"./Inventory\";import samplefishes from\"../sample-fishes\";import Fish from\"./Fish\";import base from\"../base\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={fishes:{},Order:{}};_this.addstate=function(fish){// make a copy of fishes.\nvar fishes=_objectSpread({},_this.state.fishes);//update a new fish to the fishes.\nfishes[\"fish\".concat(Date.now())]=fish;// using setstate method for updating a fishes\n_this.setState({fishes:fishes});};_this.loadsamplefishes=function(){_this.setState({fishes:samplefishes});};_this.addtoorder=function(key){//copy a whole state.\nvar Order=_objectSpread({},_this.state.Order);//add a fish or update a value of fish to order\nOrder[key]=Order[key]?Order[key]+1:1;// set a new state\n_this.setState({Order:Order});};_this.updatestate=function(key,fish){//copy fishes state.\nvar fishes=_objectSpread({},_this.state.fishes);// update a fish .\nfishes[key]=fish;// set new state.\n_this.setState({fishes:fishes});};_this.Removefish=function(key){// copy curent state\nvar fishes=_objectSpread({},_this.state.fishes);// remove fish.\nfishes[key]=null;//set new state.\n_this.setState({fishes:fishes});};_this.removeorder=function(key){// copy curent state\nvar Order=_objectSpread({},_this.state.Order);// remove fish.\ndelete Order[key];//set new state.\n_this.setState({Order:Order});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var localStorageRef=localStorage.getItem(this.props.match.params.storeId);if(localStorageRef){this.setState({Order:JSON.parse(localStorageRef)});}this.ref=base.syncState(\"\".concat(this.props.match.params.storeId,\"/fishes\"),{context:this,state:'fishes'});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){localStorage.setItem(this.props.match.params.storeId,JSON.stringify(this.state.Order));}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){base.removeBinding(this.ref);}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"catch-of-the-day\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu\"},/*#__PURE__*/React.createElement(Header,{tagline:\"Famous seaFood\"}),/*#__PURE__*/React.createElement(\"ul\",{className:\"fishes\"},Object.keys(this.state.fishes).map(function(key){return/*#__PURE__*/React.createElement(Fish,{key:key,details:_this2.state.fishes[key],addtoorder:_this2.addtoorder,index:key});}))),/*#__PURE__*/React.createElement(Order,{fishes:this.state.fishes,order:this.state.Order,removeorder:this.removeorder}),/*#__PURE__*/React.createElement(Inventory,{addstate:this.addstate,loadsamplefishes:this.loadsamplefishes,fishes:this.state.fishes,updatestate:this.updatestate,Removefish:this.Removefish,storeId:this.props.match.params.storeId}));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["E:/ReactApp/src/components/App.js"],"names":["React","Header","Order","Inventory","samplefishes","Fish","base","App","state","fishes","addstate","fish","Date","now","setState","loadsamplefishes","addtoorder","key","updatestate","Removefish","removeorder","localStorageRef","localStorage","getItem","props","match","params","storeId","JSON","parse","ref","syncState","context","setItem","stringify","removeBinding","Object","keys","map","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Header from \"./Header\";\r\nimport Order from \"./Order\";\r\nimport Inventory from \"./Inventory\";\r\nimport samplefishes from \"../sample-fishes\";\r\nimport Fish from \"./Fish\";\r\nimport base from \"../base\";\r\nclass App extends React.Component{\r\n    state={\r\n        fishes:{},\r\n        Order:{}\r\n    };\r\n\r\n    addstate = fish=>{\r\n        // make a copy of fishes.\r\n        const fishes={...this.state.fishes};\r\n        //update a new fish to the fishes.\r\n        fishes[`fish${Date.now()}`]=fish;\r\n        // using setstate method for updating a fishes\r\n        this.setState({fishes});\r\n    }\r\n    \r\n    loadsamplefishes=()=>{\r\n        this.setState({fishes:samplefishes});\r\n    }\r\n\r\n    componentDidMount(){\r\n        const localStorageRef= localStorage.getItem(this.props.match.params.storeId);\r\n        \r\n        if(localStorageRef){\r\n            this.setState({Order:JSON.parse(localStorageRef)});\r\n        }\r\n        this.ref = base.syncState(`${this.props.match.params.storeId}/fishes`,{\r\n            context:this,\r\n            state: 'fishes'\r\n        }\r\n        );\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        localStorage.setItem(\r\n            this.props.match.params.storeId,\r\n            JSON.stringify(this.state.Order)\r\n        );\r\n    }\r\n    \r\n\r\n    componentWillUnmount(){\r\n        base.removeBinding(this.ref);\r\n    }\r\n\r\n    addtoorder=(key)=>{\r\n    \r\n        //copy a whole state.\r\n        const Order={...this.state.Order};\r\n        //add a fish or update a value of fish to order\r\n        Order[key]=Order[key]?Order[key]+1:1;\r\n        // set a new state\r\n        this.setState({Order});\r\n    }\r\n\r\n    updatestate =(key,fish)=>{\r\n        //copy fishes state.\r\n        const fishes={...this.state.fishes};\r\n        // update a fish .\r\n        fishes[key]=fish;\r\n        // set new state.\r\n        this.setState({fishes});\r\n    }\r\n\r\n    Removefish=(key)=>{\r\n        // copy curent state\r\n        const fishes={...this.state.fishes};\r\n        // remove fish.\r\n        fishes[key]=null;\r\n        //set new state.\r\n        this.setState({fishes});\r\n    }\r\n\r\n    removeorder=(key)=>{\r\n        // copy curent state\r\n        const Order={...this.state.Order};\r\n        // remove fish.\r\n        delete Order[key];\r\n        //set new state.\r\n        this.setState({Order});\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"catch-of-the-day\">\r\n                <div className=\"menu\">\r\n                    <Header tagline=\"Famous seaFood\"/>\r\n                    <ul className=\"fishes\">\r\n                        {Object.keys(this.state.fishes).map(key=> (\r\n                        <Fish key={key} details={this.state.fishes[key]} addtoorder={this.addtoorder} index={key}/>))}\r\n                    </ul>\r\n                </div>\r\n                <Order fishes={this.state.fishes} order={this.state.Order} removeorder={this.removeorder}/>    \r\n                <Inventory addstate={this.addstate} loadsamplefishes={this.loadsamplefishes} fishes={this.state.fishes} updatestate={this.updatestate} Removefish={this.Removefish} storeId={this.props.match.params.storeId}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}